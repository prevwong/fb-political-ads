(this["webpackJsonpdv-app"]=this["webpackJsonpdv-app"]||[]).push([[0],{265:function(e,t,a){e.exports=a(543)},270:function(e,t,a){},271:function(e,t,a){},543:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(11),o=a.n(c),l=(a(270),a(271),a(9)),s=a(10),i=a(200),u=function(e){var t=e.children,a=Object(n.useRef)(),c=Object(i.useIsVisible)(a),o=Object(n.useState)(!1),l=Object(s.a)(o,2),u=l[0],f=l[1];return Object(n.useEffect)((function(){c&&f(!0)}),[c]),r.a.createElement("div",{ref:a,className:"visibility ".concat(c&&"visible"," ").concat(u&&"wasVisible")},t)},f=function(e){var t=e.preface,a=e.title,n=e.subtitle,c=e.children;return r.a.createElement(u,null,r.a.createElement(l.Layout.Row,{gutter:"10"},r.a.createElement(l.Layout.Col,{span:"24"},r.a.createElement("div",{style:{paddingLeft:"50px",paddingRight:"50px",paddingBottom:"40px"}},r.a.createElement("h1",null,t?r.a.createElement("small",null,t):null,r.a.createElement("br",null),a,n?r.a.createElement("small",{className:"hero-subtitle"},n):null),c))))},p=function(e){var t=e.visualisation;return r.a.createElement(u,null,r.a.createElement(l.Layout.Row,{gutter:"10"},r.a.createElement(l.Layout.Col,{span:"24"},r.a.createElement("div",{className:"graph-container"},r.a.createElement(t)))))},m=a(16),d=a.n(m),h=a(86),y=a(27),b=a(8),g=function(e){var t=e.data,a=e.onChange,c=Object(n.useState)(),o=Object(s.a)(c,2),l=o[0],i=o[1];return r.a.createElement("ul",{className:"legends"},t.map((function(e,t){var n=e.color,c=e.name;return r.a.createElement("li",{key:t},r.a.createElement("a",{className:"".concat(l==c?"current":""),onClick:function(){var e;i(e=l==c?null:c),a&&a(e)}},r.a.createElement("span",{className:"circle",style:{background:n}}),r.a.createElement("p",null,c),r.a.createElement("i",{className:"el-icon-close"})))})))},v=function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),c=Object(n.useState)(),o=Object(s.a)(c,2),i=o[0],u=o[1],f=Object(n.useState)(),p=Object(s.a)(f,2),m=p[0],v=p[1],E=Object(n.useRef)();E.current=m;var O=Object(n.useCallback)(Object(y.a)(d.a.mark((function n(){var r,c,o,l,i,f,p,m,y,g,O,j,x,k,w,S;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=b.t("body").append("div").attr("class","tooltip").style("opacity",0),c=b.t(e.current),t.current=c,o=b.i().translate([480,250]).scale([1e3]),l=b.j().projection(o),i=function(e){e.selectable&&(c.selectAll("path").style("opacity",(function(t){return t.properties.name==e.properties.name?1:.2})),r.transition().duration(200).style("opacity",.9),r.html("\n        <div>".concat(e.properties.name,"</div>\n        ")).style("left",b.d.pageX+"px").style("top",b.d.pageY-28+"px"))},f=function(){c.selectAll("path").style("opacity",(function(e){return 1})),r.transition().duration(500).style("opacity",0)},c.unhighlightRegion=f,n.next=10,b.l("datasets/state-entities-impressions-classified.json");case 10:return p=n.sent,n.next=13,b.l("datasets/us-states.json");case 13:m=n.sent,y=0;case 15:if(!(y<m.features.length)){n.next=27;break}if(g=m.features[y].properties.name,O=p[g]){n.next=20;break}return n.abrupt("continue",24);case 20:j=Object.entries(O).map((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1],r=n.entities,c=r.reduce((function(e,t){var a=t.name,n=t.impressions;return e[a=(a=(a=(a=(a=a.replace("-","")).replace(",","")).replace("`s","")).replace('"',"")).trim()]=e[a]?e[a]+parseInt(n):parseInt(n),e}),{}),o=Object.entries(c).sort((function(e,t){return e[1]>t[1]?-1:1})),l=r.reduce((function(e,t){return e+parseInt(t.impressions)}),0),i=a.split("/");return[i[i.length-1],Object(h.a)({},n,{entities:o,totalImpressions:l})]})),x=j.sort((function(e,t){var a=Object(s.a)(e,2),n=(a[0],a[1]),r=Object(s.a)(t,2),c=(r[0],r[1]);return n.totalImpressions>c.totalImpressions?-1:1})),k=x[0],m.features[y].properties.category=k;case 24:y++,n.next=15;break;case 27:w=Array.from(new Set(m.features.filter((function(e){return!!e.properties.category})).map((function(e){return e.properties.category&&e.properties.category[0]})))),S=b.q().domain(w).range(b.s),a.current=S,u(w.map((function(e){return{name:e,color:S(e)}}))),c.selectAll("path").data(m.features).enter().append("path").attr("d",l).style("stroke","#fff").style("stroke-width","1").style("cursor","pointer").style("transition","0.1s ease-in").style("fill",(function(e){e.selectable=!0;var t=e.properties.category&&e.properties.category[0];return t?S(t):"#fafafa"})).on("mousedown",(function(e){E.current&&e.properties.name==E.current.name?(v(null),f()):(v(e.properties),i(e))})).on("mouseover",(function(e){E.current||i(e)})).on("mouseout",(function(e){E.current||f()}));case 32:case"end":return n.stop()}}),n)}))),[]);return Object(n.useEffect)((function(){O()}),[]),r.a.createElement("div",null,r.a.createElement(l.Layout.Row,null,r.a.createElement(l.Layout.Col,{span:"17"},r.a.createElement("svg",{preserveAspectRatio:"xMinYMin meet",viewBox:"0 0 ".concat(960," ").concat(500),ref:e})),r.a.createElement(l.Layout.Col,{span:"7",style:{position:"relative"}},r.a.createElement("div",{className:"toolbar"},r.a.createElement("section",null,r.a.createElement("h3",null,"Legends"),i?r.a.createElement(g,{data:i,onChange:function(e){t.current.selectAll("svg path").each((function(t){var n=t.properties.category&&t.properties.category[0];e&&n!=e?(this.style.fill="#eee",t.selectable=!1):(t.selectable=!0,this.style.fill=a.current(n))}))}}):null)),m?r.a.createElement("div",{className:"toolbar overlay",style:{overflow:"auto"}},r.a.createElement("section",{style:{overflow:"hidden"}},r.a.createElement("h2",{style:{marginBottom:0}},m.name,r.a.createElement("i",{className:"el-icon-close close",onClick:function(){v(null),t.current.unhighlightRegion()}})),r.a.createElement("h3",null,r.a.createElement("span",{className:"circle",style:{background:a.current(m.category[0])}})," ",m.category[0]),r.a.createElement("table",{style:{overflow:"scroll",borderSpacing:"0px 7px",marginTop:"10px"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{align:"left",width:"300"},"Entity"),r.a.createElement("th",{align:"right"},"Imp."))),r.a.createElement("tbody",null,m.category[1].entities.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",{style:{fontSize:"12px"}},e[0]),r.a.createElement("td",{style:{fontSize:"12px"}},r.a.createElement(l.Tag,{type:"primary",style:{textAlign:"center",width:"100%",borderRadius:"100px"}},e[1])))})))))):null)))},E=function(e){return e[0].toUpperCase()+e.slice(1,e.length)},O=function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),c=Object(n.useState)(),o=Object(s.a)(c,2),i=o[0],u=o[1],f=Object(n.useState)(),p=Object(s.a)(f,2),m=p[0],v=p[1],O=Object(n.useState)(),j=Object(s.a)(O,2),x=j[0];j[1];Object(n.useRef)().current=x;var k=Object(n.useCallback)(Object(y.a)(d.a.mark((function n(){var r,c,o,l,s,i,f,p,m,y,g,O,j,x,k;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=b.t(e.current),t.current=r,o=900-(c={top:20,right:20,bottom:30,left:100}).left-c.right,l=400-c.top-c.bottom,s=r.append("g").attr("transform","translate(".concat(c.left,", ").concat(c.top,")")),i=b.o().rangeRound([0,l]).paddingInner(.05).align(.1),f=b.p().rangeRound([0,o]),p=function(e){e.selectable&&(r.selectAll("rect").style("opacity",(function(t){return t==e?1:.2})),k.transition().duration(200).style("opacity",.9),k.html("\n          <div>".concat(E(e.key),": ").concat(e[1]-e[0],"</div>\n        ")).style("left",b.d.pageX+"px").style("top",b.d.pageY-28+"px"))},m=function(){r.selectAll("rect").style("opacity",(function(e){return 1})),k.transition().duration(500).style("opacity",0)},r.unhighlightRegion=m,n.next=13,b.l("datasets/categorisedSentimentFinal.json");case 13:y=n.sent,g=["entity","neutral","mixed","positive","negative"],O=Object.keys(y).reduce((function(e,t){var a=y[t],n=Object(h.a)({entity:t},g.slice(1).reduce((function(e,t){var n=a.filter((function(e){return e.conclusion==t}));return e[t]=n.length,e}),{}));return e.push(n),e}),[]),console.log(O),i.domain(O.map((function(e){return e.entity}))),f.domain([0,100]).nice(),j=b.u().keys(g.slice(1))(O),x=b.q().range(["#62bedc","#6b8ae4","#1fa888","#fec958"]),v(g.slice(1).map((function(e){return{name:E(e),color:x(e)}}))),a.current=x,k=b.t("body").append("div").attr("class","tooltip").style("opacity",0),s.append("g").selectAll("g").data(j).enter().append("g").attr("fill",(function(e){return x(e.key)})).selectAll("rect").data((function(e){return e.map((function(t,a){return t.key=e.key,t.index=a,t})),e})).enter().append("rect").style("transition","0.1s ease-in").attr("y",(function(e){return e.selectable=!0,i(e.data.entity)})).attr("x",(function(e,t){return f(e[0])})).attr("width",(function(e){return f(e[1])-f(e[0])})).attr("height",i.bandwidth()).style("cursor","pointer").on("mouseover",(function(e){p(e)})).on("mouseout",(function(e){m()})).on("mousedown",(function(e){var t={selected:e,data:y[e.data.entity],keys:g.slice(1)};u(t)})),s.append("g").attr("class","axis").attr("transform","translate(0,0)").call(b.b(i)),s.append("g").attr("class","axis").attr("transform","translate(0, ".concat(l,")")).call(b.a(f));case 27:case"end":return n.stop()}}),n)}))),[]);return Object(n.useEffect)((function(){k()}),[]),r.a.createElement("div",{style:{padding:"20px 0"}},r.a.createElement(l.Dialog,{title:i&&i.selected.data.entity,visible:!!i,onCancel:function(){return u(null)}},r.a.createElement(l.Dialog.Body,null,i?r.a.createElement(l.Tabs,{activeName:i.selected.key,value:i.selected.key},i.keys.map((function(e){var t={columns:[{label:"Message",prop:"message"},{label:"Impressions",prop:"impressions",width:120}],data:i.data.filter((function(t){return t.conclusion==e})).reduce((function(e,t){return e.push({message:t.text,impressions:t.impressions}),e}),[])};return r.a.createElement(l.Tabs.Pane,{label:r.a.createElement(r.a.Fragment,null,E(e)," ",r.a.createElement(l.Tag,{style:{background:a.current(e)}},i.selected.data[e])),name:e,key:e},r.a.createElement(l.Table,{height:250,style:{width:"100%"},columns:t.columns,data:t.data}))}))):null)),r.a.createElement(l.Layout.Row,null,r.a.createElement(l.Layout.Col,{span:"20"},r.a.createElement("svg",{ref:e,preserveAspectRatio:"xMinYMin meet",viewBox:"0 0 ".concat(900," ").concat(400)})),r.a.createElement(l.Layout.Col,{span:"4"},r.a.createElement("div",{className:"toolbar"},r.a.createElement("section",null,r.a.createElement("h3",null,"Legends"),m?r.a.createElement(g,{data:m,onChange:function(e){e=e?e.toLowerCase():e,t.current.selectAll("rect").each((function(t){var n=t.key;e&&n!=e?(this.style.fill="#eee",t.selectable=!1):(this.style.fill=a.current(n),t.selectable=!0)}))}}):null)))))},j=a(60),x=(a(198),{ENTITIES:"entities",TARGETS:"targets",ADVERTISER:"advertiser",PAID_FOR_BY:"paid_for_by"}),k=function(){var e,t,a,c=Object(n.useRef)(),o=x,i=Object(n.useState)(),u=Object(s.a)(i,2),f=u[0],p=u[1],m=Object(n.useState)({}),h=Object(s.a)(m,2),g=h[0],v=h[1],E=Object(n.useState)("Select a node to view"),O=Object(s.a)(E,2),k=O[0],w=O[1],S=Object(n.useState)(!1),R=Object(s.a)(S,2),M=R[0],A=R[1],C=Object(n.useState)(null),I=Object(s.a)(C,2),N=I[0],T=I[1],L=Object(n.useState)(!0),B=Object(s.a)(L,2),P=B[0],q=B[1];function _(e,t){b.t(this).attrs({r:1.5*e.radius}),w("".concat(e.data,": ").concat(e.freq));var a=b.t(c.current);a.selectAll("circle").style("opacity",(function(t){return t.data==e.data?1:.2})),a.selectAll("text").style("opacity",(function(t){return t.data==e.data?1:.2}))}function W(e,t){b.t(this).attrs({r:e.radius});var a=b.t(c.current);a.selectAll("circle").style("opacity",1),a.selectAll("text").style("opacity",1)}function D(e){if(!M){var t,a,n={};f!==o.ENTITIES&&f!==o.TARGETS||(f===o.ENTITIES?(t="entity_type",a="entity"):f===o.TARGETS&&(t="target",a="segment"),N[f].forEach((function(r){JSON.parse(r).forEach((function(r){r[t]===e.data&&(n[r[a]]?n[r[a]]+=1:n[r[a]]=1)}))})),A(!0),U(n))}}function J(e){e.fx=b.d.x,e.fy=b.d.y}function Y(t){e.alphaTarget(.3).restart()}function F(t){delete t.fx,delete t.fy,e.alphaTarget(0)}function z(){t.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})),a.attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y}))}function H(e){return.03*-Math.pow(e.radius,2)}function z(){t.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})),a.attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y}))}var G=Object(n.useCallback)(Object(y.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.l("datasets/overview.json");case 2:t=e.sent,q(!1),T(t);case 5:case"end":return e.stop()}}),e)})))),V=Object(n.useCallback)(Object(y.a)(d.a.mark((function n(){var r,o,l,s,i,u,f,p;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=b.t(c.current),i=Object.values(g),u=Math.min.apply(Math,Object(j.a)(i)),f=Math.max.apply(Math,Object(j.a)(i)),o=b.p().domain([u,f]).range([5,80]),l=b.r().domain([u,f]).interpolator(b.k),s=b.p().domain([u,f]).range([0,500]),p=Object.keys(g).map((function(e){return{data:e,freq:g[e],radius:o(g[e]),fill:l(g[e]),x:960*Math.random(),y:s(g[e])}})),r.html(""),t=r.selectAll("circle").data(p).enter().append("circle").attr("r",(function(e){return e.radius})).attr("fill",(function(e){return M?"lightblue":"salmon"})).attr("stroke",(function(e){return M?b.n("lightblue").darker():b.n("salmon").darker()})).on("mouseover",_).on("mouseout",W).on("click",D).call(b.c().on("start",Y).on("drag",J).on("end",F)),a=r.selectAll("text").data(p.filter((function(e){return e.radius>20}))).enter().append("text").attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y})).attr("font-size","10px").attr("transform",(function(e){return"translate(-".concat(e.radius/2,", 0)")})).text((function(e){return e.data})),e=b.f().nodes(p).velocityDecay(.15).on("tick",z).force("x",b.g().strength(.03).x(480)).force("y",b.h().strength(.03).y(250)).force("charge",b.e().strength(H));case 12:case"end":return n.stop()}}),n)}))),[g,M]),U=function(e){var t={};Object.keys(e).sort((function(t,a){return e[a]-e[t]})).splice(0,150).forEach((function(a){t[a]=e[a]})),v(t)},X=function(e){if(console.log(N),N){var t={},a={},n=N[e];switch(e){case"entities":n.forEach((function(e){JSON.parse(e).forEach((function(e){t[e.entity_type]?t[e.entity_type]+=1:t[e.entity_type]=1}))}));break;case"targets":n.forEach((function(e){JSON.parse(e).forEach((function(e){t[e.target]?t[e.target]+=1:t[e.target]=1}))}));break;case"advertiser":case"paid_for_by":n.forEach((function(e){t[e]?t[e]+=1:t[e]=1}))}Object.keys(t).sort((function(e,a){return t[a]-t[e]})).splice(0,150).forEach((function(e){a[e]=t[e]})),v(a)}};return Object(n.useEffect)((function(){V()}),[g]),Object(n.useEffect)((function(){X(f),A(!1)}),[f]),Object(n.useEffect)((function(){M||X(f)}),[M]),Object(n.useEffect)((function(){G()}),[]),r.a.createElement("div",null,r.a.createElement(l.Layout.Row,null,r.a.createElement(l.Layout.Col,{offset:"1",style:{marginTop:"10px"}},r.a.createElement(l.Select,{onChange:function(e){p(e)},placeholder:"Choose one"},Object.values(o).map((function(e){return r.a.createElement(l.Select.Option,{key:e,label:e,value:e})})))),r.a.createElement(l.Layout.Col,{span:"18"},P?r.a.createElement(l.Loading,null):r.a.createElement("svg",{ref:c,preserveAspectRatio:"xMinYMin meet",viewBox:"0 0 ".concat(960," ").concat(500)})),r.a.createElement(l.Layout.Col,{span:"6"},r.a.createElement("h4",null,"Info Pane"),k,r.a.createElement("br",null),M?r.a.createElement(l.Button,{style:{marginTop:"10px"},type:"primary",onClick:function(){return A(!1)}},"Back to ",f):null)))},w=function(){var e=Object(n.useRef)(),t=Object(n.useState)(null),a=Object(s.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)("Select a node to view"),u=Object(s.a)(i,2),f=u[0],p=u[1],m=Object(n.useState)({}),h=Object(s.a)(m,2),g=h[0],v=h[1],E=Object(n.useState)(null),O=Object(s.a)(E,2),x=O[0],k=O[1],w=Object(n.useState)(null),S=Object(s.a)(w,2),R=S[0],M=S[1],A=Object(n.useState)(!1),C=Object(s.a)(A,2),I=C[0],N=C[1],T={},L=[];function B(t,a){b.t(e.current).selectAll("circle").style("opacity",1),b.t(this).attrs({r:2}),k(null),p(""),M(null)}function P(t,a){b.t(e.current).selectAll("circle").style("opacity",.2),b.t(this).attrs({r:10}).styles({opacity:1}),p("Title: ".concat(L[a].title,", Cluster ").concat(parseInt(L[a].label)+1)),k(L[a].color),M(L[a].label)}function q(e){return b.m(e).map((function(t){var a=t/e*Math.PI*2+Math.PI;return{x:Math.sin(a)*(500/3)+480,y:Math.cos(a)*(500/3)+250}}))}function _(e,t){return new Promise((function(a,n){e.transition().duration(2e3).attr("cx",(function(e,a){return t[a]&&t[a].x||0})).attr("cy",(function(e,a){return t[a]&&t[a].y||0})).attr("entities",(function(e,a){return t[a]&&t[a].entity||[]})).style("fill",(function(e,a){return t[a]&&t[a].color||"transparent"})).on("end",(function(){a()}))}))}T.names={aqua:"#00ffff",beige:"#f5f5dc",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",red:"#ff0000",silver:"#c0c0c0",yellow:"#ffff00"},T.random=function(){var e,t=0;for(var a in this.names)Math.random()<1/++t&&(e=a);return e};var W=Object(n.useCallback)(Object(y.a)(d.a.mark((function t(){var a,n,r,o,l,s,i,u,f,p,m,h,y,g,E,O,x,k,w,S,R,M,A,C,I,N,W,D,J,Y,F,z,H,G;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=2;break}return t.abrupt("return");case 2:for((a=b.t(e.current)).html(""),n=[],r=c.labels.length,o=0;o<r;o++)L.push({id:o,x:480,y:250});for(n.push(L),l=a.selectAll("circle").data(n[0]).enter().append("circle").attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).attr("r",2).on("mouseover",P).on("mouseout",B),L=[],s=0;s<r;s++)L.push({id:s,x:960*Math.random(),y:500*Math.random()});return n.push(L),t.next=14,_(l,n[1]);case 14:for(i=q(8),u={},L=[],f={},p={},m=c.labels,h=c.entities,y=c.distances,g=c.titles,E=c.messages,O=0;O<m.length;O++)x=m[O],f[x]?f[x].push(O):f[x]=[O];for(k=0;k<8;k++)p[k]=Math.floor(Math.sqrt(4*f[k].length/Math.PI));for(w={},S=0;S<8;S++)w[S]={};for(h.map((function(e,t){var a=m[t],n=JSON.parse(e).map((function(e){return e.entity})),r=!0,c=!1,o=void 0;try{for(var l,s=n[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var i=l.value;w[a][i]?w[a][i]+=1:w[a][i]=1}}catch(u){c=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(c)throw o}}})),R=0;R<8;R++){for(A in M=[],w[R])M.push([A,w[R][A]]);M.sort((function(e,t){return t[1]-e[1]})),w[R]=[].concat(M)}for(C={},I={},N=function(e){C[e]=w[e].splice(0,3),I[e]={};var t=C[e].map((function(e){return e[0]})),a=C[e].map((function(e){return e[1]}));t.forEach((function(t,n){if(!u[t]){for(var r=T.random();Object.values(u).includes(r);)r=T.random();u[t]=r}I[e][t]={color:u[t],freq:a[n]}}))},W=0;W<8;W++)N(W);for(v(I),Math.min.apply(Math,Object(j.a)(y.flat(1/0))),Math.max.apply(Math,Object(j.a)(y.flat(1/0))),D=0,J=!0,Y=!1,F=void 0,t.prev=37,z=function(){var e=G.value,t=h[D],a=JSON.parse(t).map((function(e){return e.entity})),n=C[e].map((function(e){return e[0]})).filter((function(e){return-1!==a.indexOf(e)})),r="black";n.length>0&&(r=u[n[0]]);var c=p[e],o=i[e],l=2*Math.random()*Math.PI,s=Math.sqrt(~~(Math.random()*c*c)),f=o.x+s*Math.cos(l),m=o.y+s*Math.sin(l);L.push({id:D,x:f,y:m,label:e,color:r,centroid:o,entity:h[D],title:g[D],message:E[D]}),D++},H=m[Symbol.iterator]();!(J=(G=H.next()).done);J=!0)z();t.next=46;break;case 42:t.prev=42,t.t0=t.catch(37),Y=!0,F=t.t0;case 46:t.prev=46,t.prev=47,J||null==H.return||H.return();case 49:if(t.prev=49,!Y){t.next=52;break}throw F;case 52:return t.finish(49);case 53:return t.finish(46);case 54:return n.push(L),t.next=57,_(l,n[n.length-1]);case 57:case"end":return t.stop()}}),t,null,[[37,42,46,54],[47,,49,53]])}))),[c]),D=Object(n.useCallback)(Object(y.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.l("datasets/clustering.json");case 2:t=e.sent,console.log(t),o(t);case 5:case"end":return e.stop()}}),e)}))));return Object(n.useEffect)((function(){D()}),[]),Object(n.useEffect)((function(){W()}),[c]),Object(n.useEffect)((function(){I&&(W(),N(!1))}),[I]),r.a.createElement("div",null,r.a.createElement(l.Layout.Row,null,r.a.createElement(l.Layout.Col,{span:"18"},r.a.createElement(l.Button,{onClick:function(){return N(!0)},style:{margin:"10px 20px"}},"Restart Cool Animation"),r.a.createElement("svg",{ref:e,preserveAspectRatio:"xMinYMin meet",viewBox:"0 0 ".concat(960," ").concat(500)})),r.a.createElement(l.Layout.Col,{span:"6",style:{overflow:"scroll",maxHeight:"500px"}},r.a.createElement("h4",null,"Info Pane"),f,Object.entries(g).map((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",{key:a},r.a.createElement("h5",{style:{textDecoration:R&&R==a?"underline":"none"}},"Cluster ",parseInt(a)+1),Object.entries(n).map((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];return r.a.createElement(l.Tag,{style:{opacity:x&&x!==n.color?.2:1},key:a,color:n.color},a," - ",n.freq)})))})))))};var S=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f,{preface:"An analysis of",title:"Facebook Political Advertisements",subtitle:"by Prev Wong & Danny Tey"},r.a.createElement("p",{className:"paragraph"},"Advertisement is an extremely powerful and therefore, potentially dangerous tool to spread words on any issues, and being the world's largest social media platform in the world, Facebook undeniably has become a platform to disseminate information through targeted ads. While it all seems fine -- we get to access social media for free, in exchange for advertisements, it's actually much more than that. \"If you are not paying, then you are the product\", this saying has been circulating over the past few years and to an extent, it is true. Realize it or not, we are always subconsciously affected by the advertisement shown to us."," ")),r.a.createElement(f,{preface:"What is the",title:"Big picture of Facebook political ads?"},r.a.createElement("p",{className:"paragraph"},"Let's have a high level overview of the ads. Who are the most frequently mentioned entities, targets, and advertisers?")),r.a.createElement(p,{visualisation:k}),r.a.createElement(f,{preface:"How are the top",title:"Political entities represented by advertisers?"},r.a.createElement("p",{className:"paragraph"},"Let's take a look how the top 10 most mentioned entities are potrayed across the top 100 most impressionable ads.")),r.a.createElement(p,{visualisation:O}),r.a.createElement(f,{preface:"What are the",title:"Hottest topics in each U.S state?"},r.a.createElement("p",{className:"paragraph"},"We gathered and categorised each entities associated with a state, using NLP. Each state is then represented by the category that has the most impressions.")),r.a.createElement(p,{visualisation:v}),r.a.createElement(f,{preface:"What are the",title:"Entities that occur together with each other?"},r.a.createElement("p",{className:"paragraph"},"To better understand what kind of advertisements are displayed, we used K-means clustering algorithm to cluster the ad entities, and therefore, those in the same cluster suggests that they occur frequently in an ad. By doing so, we can see how advertisers tend to associate an entity with each other, eg. Trump with white house. (However, due to limitations of d3, we are only able to select a very small portion of the data as proof-of-concept.)")),r.a.createElement(p,{visualisation:w}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(542);o.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[265,1,2]]]);
//# sourceMappingURL=main.35c696db.chunk.js.map